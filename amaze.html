<!DOCTYPE html>
<html>
<head>
  <style>
  body{
    background: grey;
  }
  .square{
    width: 25px;
    height: 25px;
    background: yellow;
    position: absolute;
  }
  .filled{
    width: 25px;
    height: 25px;
    background: black;
    position: absolute;
  }
  .empty{
    width: 25px;
    height: 25px;
    background: grey;
    position: absolute;
  }
  .player{
    width: 25px;
    height: 25px;
    border-radius: 100%;
    background: yellow;
    position: absolute;
    left: 0px;
    top: 0px;
    z-index: 1;
    opacity: 1;
    transition: opacity .25s;
    transition: width .25s;
    transition: height .25s;

  }
  .player.moving{
    opacity: .7;
    width: 15px;
    height: 15px;
  }

  @keyframes playerCantMove{
    0%{
      background: yellow;
    }
    50%{
      background: red;
    }
    100%{
      background: yellow;
    }
  }
  </style>
</head>
<body>
  <div class="board">
    <div class="player"></div>
  </div>
<script>
const LEFT = 'ArrowLeft';
const RIGHT = 'ArrowRight';
const UP = 'ArrowUp';
const DOWN = 'ArrowDown';


const board = document.querySelector('.board');

let playerPos = [0, 0];

  function handleKeyDown(e){
    let newPlayerPos;
    if(e.code === LEFT){
      newPlayerPos = [playerPos[0], playerPos[1] - 1];
      if(!isAvailableSpace(newPlayerPos[0], newPlayerPos[1], grid)){
        renderPlayerCantMove();
        return;
      } else {
        playerPos = newPlayerPos;
      }
    } else if (e.code === RIGHT){
      newPlayerPos = [playerPos[0], playerPos[1] + 1];
      if(!isAvailableSpace(newPlayerPos[0], newPlayerPos[1], grid)){
        renderPlayerCantMove();
        return;
      } else {
        playerPos = newPlayerPos;
      }
    } else if (e.code === UP){
      newPlayerPos = [playerPos[0] - 1, playerPos[1]];
      if(!isAvailableSpace(newPlayerPos[0], newPlayerPos[1], grid)){
        renderPlayerCantMove();
        return;
      } else {
        playerPos = newPlayerPos;
      }
    } else if (e.code === DOWN){
      newPlayerPos = [playerPos[0] + 1, playerPos[1]];
      if(!isAvailableSpace(newPlayerPos[0], newPlayerPos[1], grid)){
        renderPlayerCantMove();
        return;
      } else {
        playerPos = newPlayerPos;
      }
    }
    renderPlayer(playerPos[0], playerPos[1]);
  }



  function renderPlayer(newRow, newCol, time){
    let renderedPlayer = document.querySelector('.player');

    if(playerPos[0] !== newRow){

    } else {

    }
    renderedPlayer.style.top = newRow * 25 + 'px';
    renderedPlayer.style.left = newCol * 25 + 'px';
    renderedPlayer.style.transition = 'left top .25s';
    renderedPlayer.style.transition = 'top .25s';
  }

  function renderPlayerCantMove(){
    let renderedPlayer = document.querySelector('.player');
    renderedPlayer.style.animation = 'playerCantMove .25s ease';
    setTimeout(function(){
      renderedPlayer.style.animation = 'none';
    }, 500);
  }

  function isAvailableSpace(row, col, yourGrid){
    try{
      yourGrid[row][col];
    } catch {
      return false;
    }
    if(!yourGrid[row][col]){
      return false;
    }
    if(yourGrid[row][col] === 'X'){
      return false;
    } else if(yourGrid[row][col] === 'O') {
      return true;
    }
    return true;
  }


  window.addEventListener('keydown', handleKeyDown);

  function createSquareGrid(n){
      let buildGrid = [];
      for(let i = 0; i < n; i++){
        let row = [];
        for(let j = 0; j < n; j++){
          let randInt = Math.floor(Math.random() * 3);
          if(randInt === 0){
            row.push('X');
          } else {
            row.push('O');
          }
        }
        buildGrid.push(row);
      }
      buildGrid[0][0] = 'T';
      return buildGrid;
  }

// function createEdgeGraph(grid){
//   let maxEdge = grid.length + 1;
//   let graph = {};
//
//   let edgeGrid = [];
//
//   for(let i = 0; i < maxEdge; i++){
//     for(let j = 0; j < maxEdge; j++){
//       edgeGrid.push([i,j]);
//       }
//     }
//
//   for(let i = 0; i < edgeGrid.length; i++){
//     let randInt = Math.floor(Math.random() * 3);
//     if(randInt === 1){
//       let randChoice = Math.floor(Math.random() * edgeGrid.length);
//       // console.log("graph edges: ", graph[edgeGrid[i]], edgeGrid[randChoice][0]);
//       if(edgeGrid[i][0] !== edgeGrid[randChoice][0] &&
//         edgeGrid[i][1] !== edgeGrid[randChoice][1]
//       ){
//         if(!graph[edgeGrid[i]]){
//           graph[edgeGrid[i]] = [edgeGrid[randChoice]];
//         } else {
//           graph[edgeGrid[i]].push(edgeGrid[randChoice]);
//         }
//         graph[edgeGrid[i]] = edgeGrid[randChoice];
//         graph[edgeGrid[randChoice]] = edgeGrid[i];
//       }
//     }
//   }
//   return graph;
// }

function checkInArray(x, y, arr){
  for(let i = 0; i < arr.length; i++){
    if(arr[i][0] === x && arr[i][1] === y){
      return true;
    }
    return false;
  }
}

function genEdgeObj(n){
  let pointsArr = [];
  let edges = {};
  for(let i = 0; i < n; i++){
    for(let j = 0; j < n; j++){
      pointsArr.push([i,j]);
    }
  }
  for(let i = 0; i < pointsArr.length; i++){
    for(let j = 0; j < pointsArr.length; j++){
      console.log(pointsArr[i][0], pointsArr[j][0], pointsArr[i][1], pointsArr[j][1]);

      if(pointsArr[i][0] === pointsArr[j][0] && pointsArr[i][1] === pointsArr[j][1]){
        console.log('should skip');
      } else {
        let randChoice = Math.floor(Math.random() * 3);
        if(randChoice === 1){
          edges[`${pointsArr[i]}:${pointsArr[j]}`] = true;
        } else {
          edges[`${pointsArr[i]}:${pointsArr[j]}`] = false;
        }
      }

    }
  }
  return edges;
}



function drawGrid(coordinates){
  for(let row = 0; row < coordinates.length; row++){
    for(let col = 0; col < coordinates[0].length; col++){
      let leftPos = col * 25;
      let topPos = row * 25;
      const spaceState = coordinates[row][col] === 'X' ? 'filled' : 'empty';
      let space =
      `<div
        class="${spaceState}"
        style="
          left: ${leftPos}px;
          top: ${topPos}px;
        ">
      </div>`;
      board.innerHTML += space;
    }
  }
}
const grid = createSquareGrid(3);
const edges = genEdgeObj(3);
const edgeKeys = Object.keys(edges).length;
console.log(edges, edgeKeys);

drawGrid(grid);

</script>
</body>
</html>
